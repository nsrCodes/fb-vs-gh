"use strict";(self.webpackChunk_requestly_app=self.webpackChunk_requestly_app||[]).push([[4511],{73294:function(e,n,t){t.r(n),t.d(n,{default:function(){return xe}});var i=t(46417),r=t(47313),s=t(85554),o=t(28770),a=t(67251),l=t(97978),c=t(45705),u=t(78267),d=t(59491),h=t(3598),f=t(47515),p=t(1413),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},x=t(17469),m=function(e,n){return r.createElement(x.Z,(0,p.Z)((0,p.Z)({},e),{},{ref:n,icon:v}))};m.displayName="MoreOutlined";var y=r.forwardRef(m),j=t(97890),b=(t(57507),t(84520)),g=t(5629),w=t(87305),Z=t(74165),k=t(15861),N=t(29439),S=t(75549),E=t(99223),C=t(32916),O=t(3394),T=t(73746),P=t(37388),M=t(67440),I=t(46123),U=t.n(I),B=function(){return B=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},B.apply(this,arguments)},F=function(e){var n={className:e.className,type:e.type,icon:e.icon,disabled:e.disabled,onClick:e.onClick};return(0,i.jsx)(P.Z,B({title:e.tooltip,placement:"bottom",onOpenChange:e.onTooltipVisibilityChange},{children:e.isDropdown?(0,i.jsx)(u.Z,B({overlay:e.menu},{children:(0,i.jsxs)(d.Z,B({},n,{children:[e.label," ",(0,i.jsx)(M.Z,{})]}))})):(0,i.jsx)(d.Z,B({},n,{children:e.label}))}))},Y=function(e){var n=e.type,t=e.left,r=e.right,s=e.disabled,o=e.style;return(0,i.jsxs)("div",B({className:"rq-split-buttons",style:o},{children:[t&&(0,i.jsx)(F,B({className:U()("split-button",{"left-button":!!r}),type:n,disabled:s},t)),r&&(0,i.jsx)(F,B({className:U()("split-button",{"right-button":!!t}),type:n,disabled:s},r))]}))},A=t(17185),D=t(28086),L=t(14656),V=t(91391),_=t(82834),W=function(e){var n=e.recordingId,t=e.showShareModal,o=(0,s.I0)(),l=(0,s.v9)(V.jE),c=(0,A.$y)(n),u=(0,r.useState)(),d=(0,N.Z)(u,2),h=d[0],f=d[1],p=(0,r.useState)(!1),v=(0,N.Z)(p,2),x=v[0],m=v[1];(0,r.useEffect)((function(){t&&setTimeout((function(){return m(!0)}),1e3)}),[t]);var y=function(e){o(_.v.setVisibility(e))},j=function(){var e=(0,k.Z)((0,Z.Z)().mark((function e(t){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l===t){e.next=4;break}return e.next=3,(0,D.cg)(n,t);case 3:y(t);case 4:t===L.E.CUSTOM&&m(!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=(0,r.useMemo)((function(){var e=[];return l===L.E.CUSTOM&&e.push({label:"Update people having access",key:L.E.CUSTOM,icon:(0,i.jsx)(C.WY8,{className:"fix-icon-is-up"})}),l!==L.E.ONLY_ME&&e.push({label:"Make private to me",key:L.E.ONLY_ME,icon:(0,i.jsx)(S.Z,{})}),l!==L.E.PUBLIC&&e.push({label:"Share with everyone",key:L.E.PUBLIC,icon:(0,i.jsx)(O.uWg,{className:"fix-icon-is-up"})}),l!==L.E.CUSTOM&&e.push({label:"Share with specific people",key:L.E.CUSTOM,icon:(0,i.jsx)(C.WY8,{className:"fix-icon-is-up"})}),e}),[l]),g=(0,r.useCallback)((function(){(0,w.TF)(),navigator.clipboard.writeText(c).then((function(){f(!0)}))}),[c]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y,{type:"primary",left:{label:function(e){switch(e){case L.E.ONLY_ME:default:return(0,i.jsxs)("span",{children:[(0,i.jsx)(S.Z,{})," Private to me"]});case L.E.PUBLIC:return(0,i.jsxs)("span",{children:[(0,i.jsx)(O.uWg,{className:"fix-icon-is-up"})," Shared with everyone"]});case L.E.CUSTOM:return(0,i.jsxs)("span",{children:[(0,i.jsx)(C.WY8,{className:"fix-icon-is-up"})," Shared with specific people"]})}}(l),onClick:function(){(0,w.JK)(),m(!0)},isDropdown:!0,menu:(0,i.jsx)(a.Z,{onClick:function(e){var n=e.key;return j(n)},items:b})},right:l!==L.E.ONLY_ME&&{icon:(0,i.jsx)(E.Z,{}),onClick:g,tooltip:h?"Copied":"Copy link",onTooltipVisibilityChange:function(e){e||setTimeout((function(){return f(!1)}),500)}}}),x?(0,i.jsx)(T.ZP,{isVisible:x,setVisible:m,recordingId:n,currentVisibility:l,onVisibilityChange:y}):null]})},R=t(50078),q=t(48543),G=t(6699),z=t(16071),H=t(68197),J=t(59624),K=t(27483),Q=t(7529);var $=t.p+"static/media/403.df6e4cd29df84282a7c4851c28aa5b94.svg",X=t(99672),ee=t(85965),ne=function(){var e=(0,s.v9)(G.DB),n=(0,s.v9)(G.kZ),t=(0,s.v9)(ee.F2),o=(0,s.I0)(),a=(0,r.useState)(!1),l=(0,N.Z)(a,2),c=l[0],u=l[1];return(0,i.jsx)(r.Fragment,{children:(0,i.jsxs)(z.ZP,{className:"primary-card github-like-border",style:{height:"100%"},children:[(0,i.jsx)(H.Z,{className:"hp-text-center",children:(0,i.jsx)(J.Z,{span:24,children:(0,i.jsx)(H.Z,{justify:"center",children:(0,i.jsx)(J.Z,{children:(0,i.jsx)("img",{className:"hp-position-relative hp-d-block hp-m-auto",src:$,alt:"403",style:{maxHeight:"30vh"}})})})})}),(0,i.jsx)(H.Z,{style:{textAlign:"center"},align:"center",children:(0,i.jsx)(J.Z,{span:24,children:(0,i.jsxs)(Q.Z,{style:{background:"transparent"},className:"text-center",children:[(0,i.jsx)("h1",{className:"display-3",children:"You need permission"}),(0,i.jsx)("p",{className:"lead",children:"Want in? Ask for access to owner of this recording, or switch to an account with permission."}),function(){var r,s,a,l;return null!==e&&void 0!==e&&null!==(r=e.details)&&void 0!==r&&null!==(s=r.profile)&&void 0!==s&&s.email?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:(0,i.jsxs)("span",{children:["You're currently signed in as ",null===e||void 0===e||null===(a=e.details)||void 0===a||null===(l=a.profile)||void 0===l?void 0:l.email]})}),(0,i.jsx)("br",{}),(0,i.jsx)("center",{children:(0,i.jsx)(d.Z,{type:"primary",onClick:function(){(0,X.TB)(n,t,o),u(!0)},children:"Switch account"})})]}):(0,i.jsx)(K.Z,{autoPrompt:c})}()]})})})]})})},te=t(9520),ie=function(){var e=(0,j.s0)();return(0,i.jsx)(r.Fragment,{children:(0,i.jsxs)(z.ZP,{className:"primary-card github-like-border",style:{height:"100%"},children:[(0,i.jsx)(H.Z,{className:"hp-text-center",children:(0,i.jsx)(J.Z,{span:24,children:(0,i.jsx)(H.Z,{justify:"center",children:(0,i.jsx)(J.Z,{children:(0,i.jsx)("img",{className:"hp-position-relative hp-d-block hp-m-auto",src:te.Z,alt:"403",style:{maxHeight:"30vh"}})})})})}),(0,i.jsx)(H.Z,{style:{textAlign:"center"},align:"center",children:(0,i.jsx)(J.Z,{span:24,children:(0,i.jsxs)(Q.Z,{style:{background:"transparent"},className:"text-center",children:[(0,i.jsx)("h1",{className:"display-3",children:"The session recording you were looking for does not exist."}),(0,i.jsx)("center",{children:(0,i.jsx)(d.Z,{type:"primary",onClick:function(){e(R.Z.SESSIONS.RELATIVE)},children:"Go Back"})})]})})})]})})},re=t(90573),se=t(6512),oe=t(77991),ae=t(5262),le=function(){return le=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},le.apply(this,arguments)},ce=function(e,n,t,i){return new(t||(t=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(n){s(n)}}function a(e){try{l(i.throw(e))}catch(n){s(n)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}l((i=i.apply(e,n||[])).next())}))},ue=function(e,n){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(a){s=[6,a],i=0}finally{t=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},de=function(e,n){return n===e.author},he=function(e){return ce(void 0,void 0,void 0,(function(){return ue(this,(function(n){switch(n.label){case 0:return e?[4,(0,ae.hn)(e)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}}))}))},fe=function(){return fe=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},fe.apply(this,arguments)},pe=function(e,n,t,i){return new(t||(t=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(n){s(n)}}function a(e){try{l(i.throw(e))}catch(n){s(n)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}l((i=i.apply(e,n||[])).next())}))},ve=function(e,n){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(a){s=[6,a],i=0}finally{t=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},xe=function(){var e,n,t,p,v,x=(0,j.UO)().id,m=(0,j.TH)(),Z=(0,j.s0)(),k=(0,s.I0)(),N=(0,s.v9)(G.DB),S=(0,s.v9)(G.Oc),E=(0,s.v9)(V.y7),C=(0,s.v9)(V.V1),O=(0,s.v9)(V.Bl),T=(0,r.useState)(!0),P=T[0],M=T[1],I=(0,r.useState)(!1),U=I[0],B=I[1],F=(0,r.useState)(!1),Y=F[0],A=F[1],L=(0,r.useCallback)((function(){return Z(R.Z.SESSIONS.ABSOLUTE)}),[Z]),z=(0,r.useCallback)((function(){o.Z.confirm({title:"Confirm",icon:(0,i.jsx)(h.Z,{}),content:(0,i.jsx)("div",{children:(0,i.jsxs)("p",{children:["Are you sure to delete this recording?",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"Users having the shared link will not be able to access it anymore."]})}),okText:"Delete",cancelText:"Cancel",onOk:function(){return pe(void 0,void 0,void 0,(function(){return ve(this,(function(e){switch(e.label){case 0:return[4,(0,D.Mj)(x,C)];case 1:return e.sent(),L(),[2]}}))}))}})}),[x,C,L]),H=(0,r.useMemo)((function(){return(0,i.jsx)(a.Z,fe({className:"session-viewer-more-actions"},{children:(0,i.jsxs)(a.Z.Item,fe({className:"more-action",onClick:z},{children:[(0,i.jsx)(f.Z,{className:"more-action-icon"})," Delete Recording"]}),"delete")}))}),[z]);return(0,r.useEffect)((function(){return function(){k(_.v.resetState())}}),[k]),(0,r.useEffect)((function(){var e;(null===(e=m.state)||void 0===e?void 0:e.fromApp)?(0,w.WP)():(0,w.BN)()}),[x,m.state]),(0,r.useEffect)((function(){var e,n,t,i,r,s,o;S&&(M(!0),(r=x,s=null===(n=null===(e=null===N||void 0===N?void 0:N.details)||void 0===e?void 0:e.profile)||void 0===n?void 0:n.uid,o=null===(i=null===(t=null===N||void 0===N?void 0:N.details)||void 0===t?void 0:t.profile)||void 0===i?void 0:i.email,ce(void 0,void 0,Promise,(function(){var e,n,t,i,a,l,c,u;return ue(this,(function(d){switch(d.label){case 0:return e=(0,re.ad)(oe.Z),n=(0,re.JU)(e,se.O,r),[4,(0,re.QT)(n)];case 1:if(!(t=d.sent()).exists())throw(u=new Error("The session recording you were looking for does not exist.")).name="NotFound",u;switch(i=t.data(),a=i.visibility,l={payload:le(le({},i),{isRequestedByAuthor:de(i,s)}),events:null},c=null,a){case"only-me":case"custom":return[3,2];case"public":return[3,6]}return[3,6];case 2:return function(e,n,t){return!!n&&(n===e.author||!!e.accessEmails.includes(t))}(i,s,o)?[4,he(null===i||void 0===i?void 0:i.eventsFilePath)]:[3,4];case 3:return c=d.sent(),[3,5];case 4:throw(u=new Error("You do not have permission to access this recording")).name="PermissionDenied",u;case 5:return[3,8];case 6:return[4,he(null===i||void 0===i?void 0:i.eventsFilePath)];case 7:c=d.sent(),d.label=8;case 8:return l.events=c,[2,l]}}))}))).then((function(e){B(!1),k(_.v.setSessionRecording(fe({id:x},e.payload)));var n=(0,g.TI)(e.events);k(_.v.setEvents(n)),M(!1)})).catch((function(e){"PermissionDenied"===e.name&&B(!0),"NotFound"===e.name&&A(!0)})))}),[k,S,x,null===(n=null===(e=null===N||void 0===N?void 0:N.details)||void 0===e?void 0:e.profile)||void 0===n?void 0:n.uid,null===(p=null===(t=null===N||void 0===N?void 0:N.details)||void 0===t?void 0:t.profile)||void 0===p?void 0:p.email]),U?(0,i.jsx)(ne,{}):Y?(0,i.jsx)(ie,{}):P?(0,i.jsx)(q.Z,{message:"Fetching session details..."}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",fe({className:"session-viewer-page"},{children:[(0,i.jsxs)("div",fe({className:"session-viewer-header"},{children:[(0,i.jsx)("div",fe({style:{display:"flex",columnGap:"10px"}},{children:(0,i.jsx)(l.Z.Title,fe({level:3,className:"session-recording-name"},{children:E}))})),O?(0,i.jsx)("div",fe({className:"session-viewer-actions"},{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(W,{recordingId:x,showShareModal:null===(v=m.state)||void 0===v?void 0:v.viewAfterSave}),(0,i.jsx)(u.Z,fe({overlay:H,trigger:["click"]},{children:(0,i.jsx)(d.Z,{icon:(0,i.jsx)(y,{}),onClick:function(e){return e.preventDefault()}})}))]})})):null]})),(0,i.jsx)(b.Z,{},x)]}))})}}}]);
//# sourceMappingURL=f9397e2a734a6fd006a0.js.map